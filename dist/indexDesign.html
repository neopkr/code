<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="sidebar.css">
    <link rel="stylesheet" href="const.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.3/font/bootstrap-icons.css">
    <title>Code</title>
</head>

<body>
    <div class="container">
        <div class="sb-container">
            <div class="icon-sb-container">
                <div class="icon-sb">
                    <svg xmlns="http://www.w3.org/2000/svg" width="26" height="26" fill="#525252"
                        class="bi bi-file-earmark icon" viewBox="0 0 16 16" title="File">
                        <path
                            d="M14 4.5V14a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2h5.5L14 4.5zm-3 0A1.5 1.5 0 0 1 9.5 3V1H4a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V4.5h-2z" />
                    </svg>
                </div>
                <div class="icon-sb">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="#525252"
                        class="bi bi-search icon" viewBox="0 0 16 16" style="transform: rotate(90deg);" title="Search">
                        <path
                            d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z" />
                    </svg>
                </div>
            </div>
            <div class="sb-explorer">
                <p class="explorer-text">EXPLORADOR</p>
                <div class="project-name font-p dropdown-btn"><i class="bi bi-caret-up-fill arrow-file"></i> Code</div>
                <div class="files-container">
                    <div class="folder file"><i class="bi bi-folder"></i> Render</div>
                    <div class="in-folder file"><i class="bi bi-filetype-js"></i> Render.js</div>
                    <div class="folder file"><i class="bi bi-folder"></i> Window</div>
                    <div class="in-folder file"><i class="bi bi-filetype-js"></i> Window.js</div>
                    <div class="file"><i class="bi bi-filetype-tsx"></i> File.ts</div>
                    <div class="file"><i class="bi bi-filetype-js"></i> index.js</div>
                    <div class="file"><i class="bi bi-filetype-html"></i> index.html</div>
                    <div class="file"><i class="bi bi-filetype-css"></i> style.css</div>
                </div>
            </div>
        </div>
        <div class="editor-container">
            <div class="editor" id="editor"></div>
        </div>
        <div class="editor-info">
            <div class="line-numbers-container">
                <span class="line-number" id="line-number"></span>
            </div>
            <span class="spaces" id="spaces"></span>
            <span class="utf8" id="charset">UTF-8</span>
            <span class="language" id="lang">JavaScript</span>
        </div>
    </div>
    <script src="editor.js"></script>
    <script>
        const targetNodeI = document.querySelectorAll("i.bi");
        const fileIsActive = "file-is-active"
        const fileAfkActive = "file-current-out-active"
        const config = { childList: true, subtree: true };
        let canReplaceClassList = true;
        const observer = new MutationObserver(function (mutationsList) {
            mutationsList.forEach(function (mutation) {
                if (mutation.type === 'attributes' && mutation.attributeName === 'class') {
                    // El atributo 'class' de un elemento observado ha cambiado
                    const el = document.getElementsByClassName(mutation.target.className)[0]
                    if (el.classList.contains(fileIsActive)) {
                        el.classList.remove(fileIsActive)
                        if (!el.parentElement.classList.contains(fileIsActive)) {
                            el.parentElement.classList.add(fileIsActive)
                            canReplaceClassList = false;
                        }
                    } else if (el.classList.contains(fileAfkActive)) {
                        el.classList.remove(fileAfkActive)
                    }
                }
            });
        });

        const itemsI = document.querySelectorAll('i.bi');
        itemsI.forEach(function (item) {
            observer.observe(item, { attributes: true });
        });
    </script>
    <script>
        const items = document.querySelectorAll('.file');

        items.forEach(item => {
            item.addEventListener('click', (event) => {

                items.forEach(function (file) {
                    if (file.classList.contains("file-is-active") && file.tagName === "DIV") {
                        file.classList.remove("file-is-active")
                    }
                });
                if (event.target.classList.contains("file-is-active")) {
                    event.target.classList.remove('file-is-active');
                } else {
                    event.target.classList.add('file-is-active');
                }
            });
        });

        document.addEventListener("click", event => {
            // Obtener elemento clickeado
            const target = event.target;

            // Si el elemento clickeado no es un archivo, remover clase "active" del archivo activo
            if (!target.classList.contains("file")) {
                items.forEach(function (file) {
                    if (file.classList.contains("file-current-out-active")) {
                        file.classList.remove("file-current-out-active")
                    }
                });
                const activeFile = document.querySelector(".file.file-is-active");
                if (activeFile && canReplaceClassList === true) {
                    activeFile.classList.replace("file-is-active", "file-current-out-active");
                }
                canReplaceClassList = true;
            } else {
                items.forEach(function (file) {
                    if (file.classList.contains("file-current-out-active")) {
                        file.classList.remove("file-current-out-active")
                    }
                });
            }
        });
    </script>
    <script>
        const folders = document.querySelectorAll(".folder");
        const filesInFolders = document.querySelectorAll(".in-folder");

        folders.forEach((folder, index) => {
            const iconFolder = folder.childNodes[0];
            const openFolder = "bi-folder2-open";
            const closeFolder = "bi-folder";

            folder.addEventListener("click", () => {
                if (iconFolder.classList.contains(closeFolder)) {
                    iconFolder.classList.replace(closeFolder, openFolder);
                    filesInFolders[index].classList.add("in-file-show");
                } else {
                    iconFolder.classList.replace(openFolder, closeFolder);
                    filesInFolders[index].classList.remove("in-file-show");
                }
            });
        });
    </script>
    <script>
        const projectName = document.getElementsByClassName("project-name")[0];
        const icon = document.querySelector(".arrow-file");
        let isDropped = true;

        projectName.addEventListener("click", function () {
            if (isDropped) {
                icon.style.transform = "rotate(180deg)"
                isDropped = false;
            } else {
                icon.style.transform = "rotate(0deg)"
                isDropped = true;
            }
        })
    </script>
    <script>
        const svgIcons = document.querySelectorAll('.icon');
        const activeIcon = "icon-active";
        let activeIconElement = null;

        svgIcons.forEach(icon => {
            icon.addEventListener('click', () => {
                if (icon !== activeIconElement) {
                    if (activeIconElement) {
                        activeIconElement.classList.remove(activeIcon);
                    }
                    activeIconElement = icon;
                    icon.classList.add(activeIcon);
                }
            });
        });
    </script>
</body>

</html>